 async function logJSONData() {
  const response = await fetch("./data.json");
  const jsonData = await response.json();

  if (jsonData) {
    const uniqueBrands = getUniqueBrands(jsonData); // call the getUniqueBrands() function to get an array of unique brands

    const rawTempalte = document.getElementById("productListingTemplate").innerHTML;
    const compiledProductListingTempalte = Handlebars.compile(rawTempalte);
    const ourGeneratedTempalte = compiledProductListingTempalte(jsonData);

    const productListingContainer = document.getElementById("cardBodyContainer");
    productListingContainer.innerHTML = ourGeneratedTempalte;

    // create a select dropdown to display unique brands
    const brandSelectDropdown = document.createElement("select");
    brandSelectDropdown.setAttribute("id", "brandSelect");

    const defaultOption = document.createElement("option");
    defaultOption.setAttribute("value", "");
    defaultOption.innerText = "All Brands";
    brandSelectDropdown.appendChild(defaultOption);

    // add options for each unique brand to the select dropdown
    for (const brand of uniqueBrands) {
      const brandOption = document.createElement("option");
      brandOption.setAttribute("value", brand);
      brandOption.innerText = brand;
      brandSelectDropdown.appendChild(brandOption);
    }

    // add the select dropdown to the DOM
    const filterContainer = document.createElement("div");
    filterContainer.setAttribute("id", "filterContainer");
    filterContainer.appendChild(document.createTextNode("Filter by brand: "));
    filterContainer.appendChild(brandSelectDropdown);
    productListingContainer.insertBefore(filterContainer, productListingContainer.firstChild);

    // add event listener to the select dropdown to filter products by brand
    brandSelectDropdown.addEventListener("change", (event) => {
      const selectedBrand = event.target.value;
      const products = document.querySelectorAll(".product-card");

      for (const product of products) {
        if (selectedBrand === "" || product.getAttribute("data-brand") === selectedBrand) {
          product.style.display = "block";
        } else {
          product.style.display = "none";
        }
      }
    });
  }
}

